# v0.3 Roadmap: Optics optimization workflows for lab adoption

Date ratified: 2026-02-13
Status: Planned
Target release window: 2026 Q2

## Vision

`research-utils` should be a portable, simulation-agnostic research tooling stack that can be
carried from undergraduate lab work into graduate research environments.

For v0.3, the focus is practical optics optimization support where experiment scripts and
optimization workflows can include both:
- continuous parameter tuning (spacing, curvature, etc.), and
- deterministic structural choices (adding/removing optics components).

The repository remains infrastructure-only: it should orchestrate deterministic experimentation,
contracts, and optimization while keeping simulator/physics truth in adapters and downstream repos.

## Scope

### In scope
- Contract-safe support for mixed search spaces (continuous + discrete/categorical)
- Deterministic optimization runner behavior for structure-changing candidate configs
- Reproducibility-first experiment templates for optics optimization studies
- Reporting artifacts that expose structure decisions alongside objective/metrics
- Docs and examples for lab member onboarding

### Out of scope
- Embedding optics physics models in `research-utils`
- Domain-specific simulation correctness checks
- Simulator-specific heuristics in core ML/harness modules

## Milestones

### Milestone 1: Mixed-parameter contract extension
- Add discrete/categorical parameter support to `Parameter`/`ParameterSpace` contracts without
  breaking existing continuous workflows.
- Add encode/decode and validation tests for mixed spaces.
- Add ADR describing contract evolution and compatibility guarantees.

### Milestone 2: Deterministic topology-aware optimization flow
- Ensure optimization runner and strategies can evaluate candidates representing
  component inclusion/exclusion decisions.
- Add determinism tests proving same seed + same inputs yield identical topology decisions
  and best-so-far history.
- Keep strategy interfaces unchanged (`ask`/`tell`) while extending internal candidate handling.

### Milestone 3: Canonical reporting + plotting for structure changes
- Extend run-summary/reporting helpers to include structure metadata in a stable schema.
- Add proof-of-decision tests locking report keys and ordering for mixed-parameter runs.
- Add plotting helpers (or report hooks) to compare objective tradeoffs across structure families.

### Milestone 4: Agent tooling for reproducible optics studies
- Add deterministic experiment generator templates for mixed-parameter/topology studies.
- Add validator checks for explicit seeds, provenance markers, and structure metadata fields.
- Keep outputs artifact-only and simulator-agnostic per ADR 0006 boundaries.

### Milestone 5: Lab onboarding and release readiness
- Publish a short lab-facing quickstart for running and replaying an optics optimization study.
- Validate lint, typing, and fast tests on all v0.3 changes.
- Prepare release notes and finalize v0.3 status updates in `STATUS.md`.

## Acceptance criteria

v0.3 is complete when:
1. Mixed parameter-space contracts are stable and documented.
2. Deterministic optimization behavior for structure-changing workflows is covered by tests.
3. Reporting artifacts expose structure decisions in a canonical schema.
4. Agent tooling can generate and validate reproducible mixed-parameter experiments.
5. Documentation supports onboarding new lab members with minimal simulator assumptions.
