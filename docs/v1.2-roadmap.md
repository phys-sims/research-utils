# v1.2 Roadmap: Agent-first workflows for low-friction research usage

Date ratified: 2026-02-13
Status: Completed (2026-02-13)

## Vision

`phys-sims-utils` v1.2 focuses on making agent-assisted usage a first-class, reproducible,
and simulation-agnostic experience.

The target user experience is that a lab member can interact with a chatbot (or equivalent
agent interface) to reliably:
1. adapt an existing simulation codebase to work with `phys-sims-utils` contracts,
2. reason about optimization strategy choices for a specific study,
3. generate canonical graphics and summaries from sweep/optimization outputs.

v1.2 remains aligned with repository boundaries:
- infrastructure contracts, deterministic tooling, and artifact generation are in scope,
- physics truth and domain-specific correctness remain in downstream simulation repos.

## Design constraints

All v1.2 work should satisfy these constraints:

1. **Contract-first interfaces**
   - Agent-facing surfaces expose typed request/response contracts.
   - Returned outputs are structured artifacts and machine-readable recommendations.

2. **Determinism by default**
   - Same input + same seed/config => same outputs and same recommendations.
   - Agent workflows persist seed/config hash/provenance metadata where relevant.

3. **Artifact-only side effects**
   - Agent workflows produce explicit files/results under caller-provided output paths.
   - No implicit experiment execution or hidden state mutation.

4. **Simulation-agnostic core**
   - Agent tooling must not encode simulator-specific or physics-specific assumptions.
   - Any simulator adaptation guidance is generated as scaffolding/checklists, not truth claims.

5. **Composable architecture**
   - New agent workflows compose existing harness/ML/reporting contracts instead of bypassing
     them.
   - Existing public contracts remain backward compatible unless a versioned change is approved.

## Scope

### In scope
- Agent workflow contracts for adaptation guidance, strategy advisory, and graphics generation.
- Deterministic artifact schemas for agent-produced plans/reports/manifests.
- Validation checks that enforce reproducibility metadata and contract conformance.
- Documentation targeted to both humans and agents for end-to-end usage.

### Out of scope
- Embedding LLM prompt text, provider-specific prompt templates, or runtime chat prompts in
  core repository contracts.
- Automatically editing downstream simulation logic without explicit user-approved artifacts.
- Introducing simulator-specific optimization heuristics into shared core modules.

## Capability milestones (sequence-independent)

The milestones below are capability slices, not a prescribed implementation schedule.
They can be delivered in any order as long as contracts and tests remain coherent.

### Milestone A: Agent workflow contract layer

Define stable, typed interfaces for core agent intents.

**Expected deliverables**
- New/updated dataclasses or typed models describing request/response envelopes for:
  - repository adaptation assistance,
  - optimization strategy advisory,
  - graphics/summary generation.
- A shared artifact manifest contract for agent outputs.
- Explicit error contract for invalid inputs and unsupported workflows.

**Acceptance criteria**
- Contract tests lock field names, required fields, and serialization behavior.
- Determinism tests verify stable outputs for identical inputs.
- Public API surface is documented and discoverable from agent modules.

### Milestone B: Repository adaptation assistant

Provide deterministic assistance for integrating existing codebases with
`phys-sims-utils` contracts.

**Expected deliverables**
- Workflow that inspects a repository and emits adaptation artifacts (report + scaffold
  suggestions + actionable checklist).
- Deterministic checks for explicit seed usage, provenance/config metadata, and parameter path
  consistency.
- Canonical output schema for adaptation findings with severity levels and remediation steps.

**Acceptance criteria**
- Golden-file tests lock output report format and ordering.
- Integration test validates end-to-end adaptation output on a minimal fixture project.
- All emitted guidance remains simulation-agnostic and avoids physics assertions.

### Milestone C: Optimization strategy advisor

Provide deterministic strategy recommendations grounded in existing optimizer contracts.

**Expected deliverables**
- Advisor workflow that consumes structured study constraints (budget, parameter-space traits,
  determinism requirements, dependency availability).
- Output plan that recommends one or more compatible strategies (including composition options)
  with explicit rationale.
- Canonical artifact format for recommendation records, assumptions, and fallbacks.

**Acceptance criteria**
- Proof-of-decision tests lock recommendation behavior for representative scenarios.
- Recommendations map only to supported repository strategies/interfaces.
- Advisor outputs include explicit assumptions and fallback paths when optional deps are missing.

### Milestone D: Graphics and reporting concierge

Enable chat-driven generation of canonical visuals and summaries from canonical result data.

**Expected deliverables**
- Workflow that maps structured visualization intents to existing plotting/reporting helpers.
- Deterministic artifact naming and metadata for generated plots/summaries.
- Validation layer for unsupported chart intents and malformed inputs.

**Acceptance criteria**
- Integration tests confirm expected artifacts are produced from fixture results.
- Schema-lock tests cover metadata and artifact manifests.
- Error responses are structured and actionable for agent-driven UX loops.

### Milestone E: Agent/human onboarding and operations docs

Publish durable documentation that supports both direct human use and agent orchestration.

**Expected deliverables**
- A dedicated guide for agent workflow usage and artifact interpretation.
- End-to-end examples covering:
  1) adaptation assistance,
  2) strategy advisory,
  3) graphics/report generation.
- Operational guidance for reproducibility verification and CI expectations.

**Acceptance criteria**
- Documentation examples are executable against repository fixtures.
- `STATUS.md`, roadmap docs, and ADRs are synchronized.
- New behavior includes clear boundaries for what agent tooling can and cannot decide.

## Cross-cutting validation requirements

Each v1.2 milestone should include the following verification layers:

1. **Contract validation**
   - Typed contract tests for request/response and artifact schemas.

2. **Determinism validation**
   - Repeated-run tests asserting stable outputs under fixed inputs/seeds.

3. **Integration validation**
   - End-to-end tests using minimal fixtures to prove workflow usability.

4. **Proof-of-decision validation**
   - Small tests that lock intentionally chosen behaviors (recommendation policies,
     metadata defaults, artifact naming conventions).

5. **Tooling quality gates**
   - Linting/formatting, type checking, and fast test suite remain green.

## Risks and mitigations

1. **Risk: Agent scope creep into simulator/domain logic**
   - Mitigation: enforce simulation-agnostic contracts and adapter-boundary checks.

2. **Risk: Non-deterministic advisory outputs**
   - Mitigation: require explicit inputs, versioned policies, and deterministic selection rules.

3. **Risk: UX fragmentation across tools**
   - Mitigation: adopt shared workflow contracts and artifact manifest conventions.

4. **Risk: Documentation drift**
   - Mitigation: tie doc updates to milestone acceptance and keep STATUS/ADR sync mandatory.

## Definition of done for v1.2

v1.2 is complete when all of the following are true:

1. A lab member can obtain deterministic adaptation guidance for integrating an existing
   simulation workflow with `phys-sims-utils`.
2. A lab member can receive deterministic, contract-valid optimization strategy guidance with
   explicit rationale and fallbacks.
3. A lab member can request canonical graphics/summaries from existing result artifacts through
   structured agent workflow interfaces.
4. Agent workflows remain artifact-producing, simulation-agnostic, and reproducibility-first.
5. CI, docs, ADRs, and roadmap state are synchronized with shipped behavior.
